

#### CAT 使用常见问题汇总（中文版）



1. **训练过程中出现nan的原因？**

​     一个可能的原因是神经网络输出单元数目与词典中的单元数目不匹配，此时应当重新确定输出单元数目（见2）。

 

2. **如何确定输出单元数目？**

​    在数据集上完成数据准备步骤后，在data目录下会生成lang_*文件夹，其中会有一个token.txt文件，其中除了eps token和#开始的token外，其余token的数目总和即为神经网络对应的输出单元数目。

 

3. **验证集loss为负数的原因？**

​    由于验证集语料未纳入分母图语言模型训练，验证集上的p(l)计算可能出现问题，此时会出现loss为负数的情况。

 

4. **写文件时出现Error closing TableWriter [in destructor]**

​      一般是因为磁盘满了，应当变更存储目录。

 

5. **加载模型时出现missing key(s)… unexpted key(s)**

​    加载的模型与训练时定义的模型不同。如果出现size mismatch错误，则是隐藏单元数目等超参数定义与训练时定义的模型不同。一般而言，加载时的模型应当与训练时的模型保持一致。如果两个模型仅仅是定义时的名称有所不同（例如训练时定义为lstm，加载时的定义为lstm_layer），则可以通过改变模型名称的方式进行加载。

 

6. 对于小数据集，可以用hfd5的数据格式，大数据集(1000h以上)一般建议使用pickle格式。小数据集可以加载到内存中进行训练（dataset.py中的SpeechDatasetMem()），大数据集建议使用SpeechDataset()

 

7. **实验结果不好，可以从哪几个方向调整？**

①学习速率设置是否合理？何时开始learning rate decay比较合理?需要观察验证集loss曲线。

②如果是BLSTM模型，隐藏单元数目设置是否合理？与数据集大小有关。

③如果训练没有出现很大的波动，CTC权重可适当降低，或者不用CTC损失函数加权。

④改变神经网络模型。如加上VGG layer等

 

8. **训练有异常，从哪些方面检查？**

①Data/den_meta目录下，分母图生成是否异常？

②训练集、验证集的text_number转化是否有误？weight计算是否正常？若有，检查数据准备步骤是否有误。

其他......